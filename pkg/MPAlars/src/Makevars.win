STKPPDIR = ./stkpp
LARSDIR = ./lars
FUSIONDIR = ./fusion

MPALIB = ./libMPA.a
STKPPLIBDIR = $(STKPPDIR)/lib
STKPPLIB = $(STKPPLIBDIR)/libSTKpp.a

# c++ flag
PKG_CPPFLAGS = -ansi -pedantic -Wall

## Use the R_HOME indirection to support installations of multiple R version
PKG_LIBS = `$(R_HOME)/bin/Rscript -e "Rcpp:::LdFlags()"` $(MPALIB) $(STKPPLIB)

.PHONY: all libmpa

all: $(SHLIB)
$(SHLIB): libmpa

libmpa:
	(cd $(STKPPDIR) && $(MAKE) all)
	(cd $(LARSDIR) && $(MAKE)   -f lars.mk)
	(cd $(FUSIONDIR) && $(MAKE) -f fusion.mk)
#	$(AR) $(ARFLAGS) $(MPALIB)


STKPPDIR = ./stkpp
STKPPLIBDIR = $(STKPPDIR)/lib
STKPPLIB    = $(STKPPLIBDIR)/libSTKpp.a

PKG_CPPFLAGS =  -ansi -pedantic -Wall -O3 -fPIC -ftree-vectorize -march=native -funroll-loops

## Use the R_HOME indirection to support installations of multiple R version
PKG_LIBS = `$(R_HOME)/bin/Rscript -e "Rcpp:::LdFlags()"`  -L$(STKPPLIBDIR) $(STKPPLIB)

.PHONY: all stkpp

all: $(SHLIB)
$(SHLIB): stkpp

stkpp:
	(cd $(STKPPDIR) && $(MAKE) all)
	$(RANLIB) $(STKPPLIB)

